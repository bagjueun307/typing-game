<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í™œë™í˜• ì¹´íƒ„ ì˜í† ì „ìŸ</title>
    <style>
        :root { --p1: #3498db; --p2: #e74c3c; --bg: #1a1a1a; }
        body { background: var(--bg); color: white; font-family: 'Malgun Gothic', sans-serif; margin: 0; overflow: hidden; }
        
        /* 4ê°œ ëª¨ë‹ˆí„° ë ˆì´ì•„ì›ƒ */
        .screen-container { display: grid; grid-template-columns: repeat(4, 25vw); height: 100vh; }
        .monitor { border: 4px solid #333; display: flex; flex-direction: column; align-items: center; padding: 20px; box-sizing: border-box; position: relative; }
        
        /* ëª¨ë‹ˆí„°ë³„ í…Œë§ˆ */
        #m1 { border-color: #f1c40f; } /* ë³¸ë¶€ */
        #m2 { border-color: #2ecc71; } /* ë‚˜ë¬´/ë²½ëŒ */
        #m3 { border-color: #e67e22; } /* ë°€/ì²  */
        #m4 { border-color: #9b59b6; } /* ê±´ì„¤/ì•½íƒˆ */

        /* íŒ ë’¤ì§‘ê¸° ê·¸ë¦¬ë“œ (4x4) */
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; width: 100%; margin-top: 15px; }
        .cell { height: 60px; background: #333; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; border-radius: 4px; transition: 0.3s; font-weight: bold; }
        .p1-cell { background: var(--p1); color: white; box-shadow: inset 0 0 10px #000; }
        .p2-cell { background: var(--p2); color: white; box-shadow: inset 0 0 10px #000; }

        /* ìƒíƒœì°½ */
        .stat-card { width: 90%; background: #222; padding: 10px; border-radius: 8px; margin-bottom: 10px; border-left: 5px solid; }
        .p1-stat { border-color: var(--p1); }
        .p2-stat { border-color: var(--p2); }

        input { width: 90%; padding: 12px; font-size: 1.2rem; border-radius: 5px; border: 2px solid #555; background: #000; color: #fff; text-align: center; }
        .res-icon { font-size: 1.2rem; margin-right: 5px; }
        .vp { font-size: 2.5rem; font-weight: bold; color: #f1c40f; }
    </style>
</head>
<body>

<div class="screen-container">
    <div class="monitor" id="m1">
        <h2>ğŸ“Š CENTRAL HQ</h2>
        <div class="stat-card p1-stat">
            <b>BLUE (P1)</b><br>
            <span id="p1-res">ğŸŒ²0 ğŸ§±0 ğŸŒ¾0 â›ï¸0</span>
            <div class="vp">VP: <span id="p1-vp">0</span></div>
        </div>
        <div class="stat-card p2-stat">
            <b>RED (P2)</b><br>
            <span id="p2-res">ğŸŒ²0 ğŸ§±0 ğŸŒ¾0 â›ï¸0</span>
            <div class="vp">VP: <span id="p2-vp">0</span></div>
        </div>
        <div id="game-log" style="font-size:0.8rem; color:#888; margin-top:10px;"></div>
    </div>

    <div class="monitor" id="m2">
        <h2>ğŸŒ² WOOD & BRICK ğŸ§±</h2>
        <input type="text" id="m2-input" placeholder="ë‹¨ì–´ ì¹˜ê³  ì ë ¹!">
        <div class="grid" id="grid-m2"></div>
    </div>

    <div class="monitor" id="m3">
        <h2>ğŸŒ¾ WHEAT & IRON â›ï¸</h2>
        <input type="text" id="m3-input" placeholder="ë‹¨ì–´ ì¹˜ê³  ì ë ¹!">
        <div class="grid" id="grid-m3"></div>
    </div>

    <div class="monitor" id="m4">
        <h2>ğŸ° FORTRESS</h2>
        <p style="font-size: 0.8rem;">[ë§ˆì„]ğŸŒ²1ğŸ§±1 / [ë„ì‹œ]ğŸŒ¾2â›ï¸1 / [ê°•íƒˆ]ìê¸ˆ5</p>
        <input type="text" id="m4-input" placeholder="ëª…ë ¹ì–´ ì…ë ¥">
        <div class="grid" id="grid-m4"></div>
    </div>
</div>

<script>
    const P1 = 'p1', P2 = 'p2';
    const state = {
        p1: { res: { wood: 0, brick: 0, wheat: 0, iron: 0 }, vp: 0 },
        p2: { res: { wood: 0, brick: 0, wheat: 0, iron: 0 }, vp: 0 }
    };

    const wordList = ["ë°”ë‹¤", "í•˜ëŠ˜", "êµ¬ë¦„", "íƒœì–‘", "ë‹¬ë¹›", "ë³„ë¹›", "ë°”ëŒ", "ì•ˆê°œ", "í’€ì", "ë‚˜ë¬´", "ì¤„ê¸°", "ë¿Œë¦¬", "ëª¨ë˜", "ìê°ˆ", "ë°”ìœ„", "ëŒ€ì§€"];
    const grids = { m2: [], m3: [], m4: [] };

    // ì´ˆê¸°í™”
    function init() {
        ['m2', 'm3', 'm4'].forEach(mId => {
            const gridEl = document.getElementById(`grid-${mId}`);
            for(let i=0; i<16; i++) {
                const item = { word: wordList[i], owner: null };
                grids[mId].push(item);
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.id = `${mId}-cell-${i}`;
                cell.innerText = item.word;
                gridEl.appendChild(cell);
            }
        });
        setInterval(produce, 3000); // 3ì´ˆë§ˆë‹¤ ìì› ìƒì‚°
        render();
    }

    function render() {
        // ìì› í‘œì‹œ ì—…ë°ì´íŠ¸
        document.getElementById('p1-res').innerText = `ğŸŒ²${state.p1.res.wood} ğŸ§±${state.p1.res.brick} ğŸŒ¾${state.p1.res.wheat} â›ï¸${state.p1.res.iron}`;
        document.getElementById('p2-res').innerText = `ğŸŒ²${state.p2.res.wood} ğŸ§±${state.p2.res.brick} ğŸŒ¾${state.p2.res.wheat} â›ï¸${state.p2.res.iron}`;
        document.getElementById('p1-vp').innerText = state.p1.vp;
        document.getElementById('p2-vp').innerText = state.p2.vp;

        // ê·¸ë¦¬ë“œ ìƒ‰ìƒ ì—…ë°ì´íŠ¸
        ['m2', 'm3', 'm4'].forEach(mId => {
            grids[mId].forEach((item, i) => {
                const cell = document.getElementById(`${mId}-cell-${i}`);
                cell.className = 'cell' + (item.owner ? ` ${item.owner}-cell` : '');
            });
        });
    }

    // ìì› ìƒì‚° ë¡œì§ (ì ë ¹í•œ ë•…ë§Œí¼ ìƒì‚°)
    function produce() {
        grids.m2.forEach(c => {
            if(c.owner) {
                if(Math.random() > 0.5) state[c.owner].res.wood++;
                else state[c.owner].res.brick++;
            }
        });
        grids.m3.forEach(c => {
            if(c.owner) {
                if(Math.random() > 0.5) state[c.owner].res.wheat++;
                else state[c.owner].res.iron++;
            }
        });
        render();
    }

    // ì…ë ¥ ì²˜ë¦¬
    function handle(inputEl, monitorId) {
        inputEl.addEventListener('keypress', (e) => {
            if(e.key === 'Enter') {
                const val = e.target.value.trim();
                const player = val.endsWith('1') ? P1 : (val.endsWith('2') ? P2 : null);
                const word = val.replace(/[12]/g, '');

                if(!player) { alert("ëì— 1 ë˜ëŠ” 2ë¥¼ ë¶™ì´ì„¸ìš”! (ì˜ˆ: ë°”ë‹¤1)"); return; }

                // íŒ ë’¤ì§‘ê¸° ë¡œì§ (m2, m3, m4 ê³µí†µ)
                const target = grids[monitorId].find(item => item.word === word);
                if(target) {
                    target.owner = player;
                    render();
                }

                // ëª¨ë‹ˆí„° 4 íŠ¹ìˆ˜ ê±´ì„¤ ë¡œì§
                if(monitorId === 'm4') {
                    if(word === "ë§ˆì„" && state[player].res.wood >= 1 && state[player].res.brick >= 1) {
                        state[player].res.wood--; state[player].res.brick--; state[player].vp++;
                    }
                    if(word === "ë„ì‹œ" && state[player].res.wheat >= 2 && state[player].res.iron >= 1) {
                        state[player].res.wheat -= 2; state[player].res.iron--; state[player].vp += 3;
                    }
                    render();
                }
                e.target.value = '';
            }
        });
    }

    handle(document.getElementById('m2-input'), 'm2');
    handle(document.getElementById('m3-input'), 'm3');
    handle(document.getElementById('m4-input'), 'm4');

    init();
</script>
</body>
</html>
